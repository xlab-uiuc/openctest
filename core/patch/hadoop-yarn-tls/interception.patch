From 19517a2b1cabbbc500793d50aaeb132847110a90 Mon Sep 17 00:00:00 2001
From: KobeNorris <kobenorriswu@gmail.com>
Date: Mon, 5 Dec 2022 19:47:44 -0600
Subject: [PATCH 1/2] feat: Update pom files

---
 hadoop-common-project/hadoop-common/pom.xml               | 1 +
 .../hadoop-yarn-server-timelineservice/pom.xml            | 8 ++++++++
 hadoop-yarn-project/hadoop-yarn/pom.xml                   | 1 +
 pom.xml                                                   | 7 +++++++
 4 files changed, 17 insertions(+)

diff --git a/hadoop-common-project/hadoop-common/pom.xml b/hadoop-common-project/hadoop-common/pom.xml
index 530e18e4b83..984eceb74ff 100644
--- a/hadoop-common-project/hadoop-common/pom.xml
+++ b/hadoop-common-project/hadoop-common/pom.xml
@@ -911,6 +911,7 @@
           <plugin>
             <groupId>org.apache.maven.plugins</groupId>
             <artifactId>maven-surefire-plugin</artifactId>
+            <version>3.0.0-M4</version>
             <configuration>
               <forkCount>${testsThreadCount}</forkCount>
               <reuseForks>false</reuseForks>
diff --git a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/pom.xml b/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/pom.xml
index 1aca83c617b..bf017a1711f 100644
--- a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/pom.xml
+++ b/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/pom.xml
@@ -146,6 +146,14 @@
 
   <build>
     <plugins>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-surefire-plugin</artifactId>
+        <version>3.0.0-M4</version>
+        <configuration>
+          <reportFormat>plain</reportFormat>
+        </configuration>
+      </plugin>
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
         <executions>
diff --git a/hadoop-yarn-project/hadoop-yarn/pom.xml b/hadoop-yarn-project/hadoop-yarn/pom.xml
index ddc4e875279..b7c85a1dad8 100644
--- a/hadoop-yarn-project/hadoop-yarn/pom.xml
+++ b/hadoop-yarn-project/hadoop-yarn/pom.xml
@@ -62,6 +62,7 @@
       <plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-surefire-plugin</artifactId>
+        <version>3.0.0-M4</version>
         <configuration>
           <properties>
             <property>
diff --git a/pom.xml b/pom.xml
index f4e435c7493..f1611bfab1a 100644
--- a/pom.xml
+++ b/pom.xml
@@ -142,6 +142,13 @@ xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/x
   <build>
     <pluginManagement>
       <plugins>
+       <plugin>
+          <groupId>org.apache.maven.plugins</groupId>
+          <artifactId>maven-surefire-plugin</artifactId>
+          <configuration>
+            <reportFormat>plain</reportFormat>
+          </configuration>
+        </plugin>
         <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-dependency-plugin</artifactId>
-- 
2.25.1


From bf54f3282acb685026a6a5ff699efc52cc76acda Mon Sep 17 00:00:00 2001
From: KobeNorris <kobenorriswu@gmail.com>
Date: Mon, 5 Dec 2022 20:25:33 -0600
Subject: [PATCH 2/2] feat: Add injection

---
 .../main/java/org/apache/hadoop/yarn/conf/YarnConfiguration.java | 1 +
 1 file changed, 1 insertion(+)

diff --git a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/conf/YarnConfiguration.java b/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/conf/YarnConfiguration.java
index c1bb6aa68d2..6aea52b4038 100644
--- a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/conf/YarnConfiguration.java
+++ b/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/conf/YarnConfiguration.java
@@ -104,6 +104,7 @@
     Configuration.addDefaultResource(YARN_DEFAULT_CONFIGURATION_FILE);
     Configuration.addDefaultResource(YARN_SITE_CONFIGURATION_FILE);
     Configuration.addDefaultResource(RESOURCE_TYPES_CONFIGURATION_FILE);
+    Configuration.addDefaultResource("core-ctest.xml");
   }
 
   private static void addDeprecatedKeys() {
-- 
2.25.1

